<ng-container *ngIf="!smallScreen; else mobileView">
    <div class="timeline-wrapper" #timelineContainer>
        <div class="timeline">
            <div 
                class="fill"
                [style.height.%]="fillPercent"
                [class.is-fully-scrolled]="fillPercent >= 99">
            </div>
        </div>
    </div>
    <p-timeline [value]="data" align="alternate" class="customized-timeline">

        <ng-template #marker let-exp>
            <span class="hidden-marker"></span>
        </ng-template>

        <ng-template #content let-exp>
            <ng-container *ngIf="exp.reached">
                <div *ngIf="exp.__id % 2 !== 0"
                    appAnimateOnVisibleLeft
                    class="left animated-wrapper">
                    <div #connector class="connector">
                        <div class="line left"></div>
                        <div #dot class="dot left"></div>
                    </div>
                    <div class="glow-wrapper" #card>
                        <p-card>
                            <div class="header orange">{{getYear(exp.fromDate)}}-{{getYear(exp.toDate)}}</div>
                            <h3 class="title">
                                {{exp.title}}
                                <div class="animated-line"></div>
                            </h3><br>
                            <div class="companyInfo">
                                <div>{{exp.company}}</div>
                                <div class="separator">&#9679;</div>
                                <div>{{exp.country}}</div>
                            </div>
                            <div>
                                <p class="description" *ngFor="let description of exp.description" appAnimateOnVisibleLeft>
                                    <span class="inline-icon material-icons">keyboard_arrow_right</span>
                                    
                                    <ng-container *ngIf="findDoi(description) as doiLink">
                                        {{ doiLink.preDoiText }}
                                        <a [href]="doiLink.link" target="_blank" rel="noopener noreferrer">
                                            {{ doiLink.doiText }}
                                        </a>
                                        {{ doiLink.postDoiText }}
                                    </ng-container>
                                    <ng-container *ngIf="!findDoi(description)">
                                        {{ description }}
                                    </ng-container>
                                </p>
                            </div>
                            <div class="technologies">
                                <span class="technology" *ngFor="let technology of exp.technologies" appAnimateOnVisibleDown>
                                    {{ technology }}
                                </span>
                            </div>
                        </p-card>
                    </div>
                </div>

                <div *ngIf="exp.__id % 2 === 0"
                    appAnimateOnVisibleRight
                    class="right animated-wrapper">
                    <div #connector class="connector">
                        <div class="line right"></div>
                        <div #dot class="dot right"></div>
                    </div>
                    <div class="glow-wrapper" #card>
                        <p-card>
                            <div class="header orange">{{getYear(exp.fromDate)}}-{{getYear(exp.toDate)}}</div>
                            <h3 class="title">
                                {{exp.title}}
                                <div class="animated-line"></div>
                            </h3><br>
                            <div class="companyInfo">
                                <div>{{exp.company}}</div>
                                <div class="separator">&#9679;</div>
                                <div>{{exp.country}}</div>
                            </div>
                            <div>
                                <p class="description" *ngFor="let description of exp.description" appAnimateOnVisibleRight>
                                    <span class="inline-icon material-icons">keyboard_arrow_right</span>
                                    
                                    <ng-container *ngIf="findDoi(description) as doiLink">
                                        {{ doiLink.preDoiText }}
                                        <a [href]="doiLink.link" target="_blank" rel="noopener noreferrer">
                                            {{ doiLink.doiText }}
                                        </a>
                                        {{ doiLink.postDoiText }}
                                    </ng-container>
                                    <ng-container *ngIf="!findDoi(description)">
                                        {{ description }}
                                    </ng-container>
                                </p>
                            </div>
                            <div class="technologies">
                                <span class="technology" *ngFor="let technology of exp.technologies" appAnimateOnVisibleDown>
                                    {{ technology }}
                                </span>
                            </div>
                        </p-card>
                    </div>
                </div>
            </ng-container>

        </ng-template>

    </p-timeline>
</ng-container>
<ng-template #mobileView>
  <div class="card-list">
    <p-card
      *ngFor="let exp of data"
      class="exp-card"
      appAnimateOnVisibleDown
    >
      <div class="header orange">
        {{ getYear(exp.fromDate) }}â€“{{ getYear(exp.toDate) }}
      </div>

      <h3 class="title">
        {{ exp.title }}
      </h3><br>

      <div class="companyInfo">
        <div>{{ exp.company }}</div>
        <div class="separator">&#9679;</div>
        <div>{{ exp.country }}</div>
      </div>

      <div>
        <p
          class="description"
          *ngFor="let description of exp.description"
        >
          <span class="inline-icon material-icons">
            keyboard_arrow_right
          </span>

          <ng-container *ngIf="findDoi(description) as doiLink">
            {{ doiLink.preDoiText }}
            <a
              [href]="doiLink.link"
              target="_blank"
              rel="noopener noreferrer"
            >
              {{ doiLink.doiText }}
            </a>
            {{ doiLink.postDoiText }}
          </ng-container>
          <ng-container *ngIf="!findDoi(description)">
            {{ description }}
          </ng-container>
        </p>
      </div>

      <div class="technologies">
        <span
          class="technology"
          *ngFor="let t of exp.technologies"
        >
          {{ t }}
        </span>
      </div>
    </p-card>
  </div>
</ng-template>